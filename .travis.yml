language: ruby
cache: bundler
sudo: false
rvm: 2.5
install:
- gem install bundler
- bundle install
script:
- bundle exec jekyll build
after_success: |
  cd "$TRAVIS_BUILD_DIR"
  git init
  git checkout -b master
  git add .
  git -c user.name='travis' -c user.email='travis' commit -m init
  git push -f -q https://Martin005:$github_token@github.com/Martin005/Martin005.github.io master &>/dev/null
  cd "$TRAVIS_BUILD_DIR"
branches:
  only: dev
deploy:
  provider: pages
  target_branch: master
  edge: true
  skip-cleanup: true
  keep-history: true
  local-dir: /_site
  github_token: $github_token
  on:
    repo: Martin005/Martin005.github.io
    branch: master
  committer-from-gh: true
